{% extends "home/nav_base.html" %}
{% block content %}
<div class="container-fluid">
        <div class="jumbotron border border-secondary pt-4">
            <div class="content-section">
                <div class="media pt-1 pb-2">
                    <div class="media-body ml-2">
                        <h2>{{ user.username }}'s Progress</h2>
                        <p class="text-secondary mt-3 mb-2">
                            Use and interact with the detailed data displayed here to see in exactly which areas you thrive as a student, 
                            and where you could use some improvement. Use our Machine-Learning generated recommendations to progress even
                            faster than normally possible.
                        </p>
                    </div>
                </div>

                <!-- By Test Tabs-->
                <h4 class="mt-3 ml-1">Filter by Test</h4>
                <div class="pt-2 pb-2">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            {% if test_type == 'ALL' %}
                                <a class="nav-link active" href="{% url 'stats' 'ALL' subject %}">ALL</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'stats' 'ALL' subject %}">ALL</a>
                            {% endif %}
                        </li>
                        <li class="nav-item">
                            {% if test_type == 'SAT' %}
                                <a class="nav-link active" href="{% url 'stats' 'SAT' subject %}">SAT</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'stats' 'SAT' subject %}">SAT</a>
                            {% endif %}
                        </li>
                        <li class="nav-item">
                            {% if test_type == 'ACT' %}
                                <a class="nav-link active" href="{% url 'stats' 'ACT' subject %}">ACT</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'stats' 'ACT' subject %}">ACT</a>
                            {% endif %}
                        </li>
                        <li class="nav-item">
                            {% if test_type == 'GRE' %}
                                <a class="nav-link active" href="{% url 'stats' 'GRE' subject %}">GRE</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'stats' 'GRE' subject %}">GRE</a>
                            {% endif %}
                        </li>
                    </ul>


                    <!-- Stat Graphics -->
                    <div class="content-section d-none d-lg-block pt-2 pl-3 pr-3">
                        <div class="row pt-1">
                            <div class="col-md-6 col-lg-4" id="my-widget" data-view-mode="tabular">
                                <h6>Answer Accuracy</h6>
                                <canvas id="accuracyPieChart"></canvas>
                            </div>
                            <div class="col-md-6 col-lg-4" id="my-widget" data-view-mode="tabular">
                                <h6>Subject Distribution</h6>
                                <canvas id="subjectDistroPieChart"></canvas>
                            </div>
                            <div class="col-md-none col-lg-4" id="my-widget" data-view-mode="tabular">
                                <h6>Test Distribution</h6>
                                <canvas id="testDistroPieChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>



                <!--  By Subject Tabs-->
                <h4 class="mt-5 ml-1">Filter by Subject</h4>
                <div class="pt-2 pb-2">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            {% if subject == 'ALL' %}
                                <a class="nav-link active" href="{% url 'stats' test_type 'ALL' %}">ALL</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'stats' test_type 'ALL' %}">ALL</a>
                            {% endif %}
                        </li>
                        <li class="nav-item">
                            {% if subject == 'Math' %}
                                <a class="nav-link active" href="{% url 'stats' test_type 'Math' %}">Math</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'stats' test_type 'Math' %}">Math</a>
                            {% endif %}
                        </li>
                        <li class="nav-item">
                            {% if subject == 'Reading' %}
                                <a class="nav-link active" href="{% url 'stats' test_type 'Reading' %}">Reading</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'stats' test_type 'Reading' %}">Reading</a>
                            {% endif %}
                        </li>
                    </ul>


                    <!-- Stat Graphics -->
                    <div class="content-section d-none d-lg-block pt-2 pl-3 pr-3">
                        <div class="row pt-1">
                            <div class="col-md-6 col-lg-4" id="my-widget" data-view-mode="tabular">
                                <h6>Accuracy Over Time</h6>
                                <canvas id="accuracyOverTimeChart"></canvas>
                            </div>
                            <div class="col-md-6 col-lg-4" id="my-widget" data-view-mode="tabular">
                                <h6>Total Accuracy</h6>
                                <canvas id="totalAccuracyPieChart"></canvas>
                            </div>
                            <div class="col-md-auto col-lg-4" id="my-widget" data-view-mode="tabular">
                                <h6>Recommendation</h6>
                                <canvas id="recommendations"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}